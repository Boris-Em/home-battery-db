---
import { getAllBatteries } from '../lib/db';
import BatteryCard from '../components/BatteryCard.astro';
import '../styles/global.css';

const batteries = getAllBatteries();
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content="The most complete database of home battery systems. Compare specs, filter by your needs, and find the right battery." />
    <title>Home Battery Database</title>
  </head>
  <body class="bg-gray-50 text-gray-900 antialiased">

    <header class="border-b border-gray-200 bg-white">
      <div class="mx-auto max-w-6xl px-4 py-4">
        <h1 class="text-lg font-bold tracking-tight">Home Battery DB</h1>
      </div>
    </header>

    <main class="mx-auto max-w-6xl px-4 py-8">
      <div class="mb-6">
        <p class="text-gray-600">
          The most complete database of home battery systems â€”
          <span class="font-medium text-gray-900">{batteries.length} batteries</span> from {new Set(batteries.map(b => b.brand_slug)).size} brands.
        </p>
      </div>

      <!-- Column headers -->
      <div class="flex items-center gap-6 px-5 pb-1 text-xs font-medium uppercase tracking-wide text-gray-400">
        <div class="w-48 shrink-0">Battery</div>
        <div class="w-12 shrink-0"></div>
        <div class="flex flex-1 items-center gap-6">
          <div class="w-24">Capacity</div>
          <div class="w-28">Cont. power</div>
          <div class="w-36 hidden md:block">Backup</div>
          <div class="w-20 hidden lg:block">Warranty</div>
        </div>
        <div class="flex shrink-0 items-center gap-4">
          <div class="w-16">Markets</div>
          <div class="w-24 text-right">Price</div>
        </div>
      </div>

      <div class="flex flex-col gap-2">
        {batteries.map(battery => (
          <BatteryCard battery={battery} />
        ))}
      </div>
    </main>

  </body>
</html>
